<ion-view view-title="MI PERFIL">

  <div ng-controller="PromoController">

    <ion-content>
      <div class="row responsive-sm">
        <div class="col" align="right" style="margin: 0px;padding: 0px;">
          <li class="item item-toggle" style="border:none">
            Editar
            <label class="toggle toggle-assertive">
              <input type="checkbox" ng-model="editar">
              <div class="track">
                <div class="handle"></div>
              </div>
            </label>
          </li>
        </div>
      </div>
      <form name="form" novalidate>
        <div class="list">

          <div class="row">
            <div class="bar bar-positive">
              <h1 class="title">Información de Cuenta</h1>
            </div>
          </div>

          <br/><br/>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Usuario</span>
            <input type="text" placeholder="Escribe tu nombre" ng-model="user.username"
                   ng-disabled="true">
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Nombre</span>
            <input type="text" placeholder="Escribe tu nombre" ng-model="cliente.nombre"
                    ng-disabled="!editar">
          </label>
          <label class="item item-input item-stacked-label">
            <span class="input-label">Apellidos</span>
            <input type="text" placeholder="Escribe tus apellidos" ng-model="cliente.apellidos"
                   ng-disabled="!editar">
          </label>

          <div class="form-group">
            <label class="item item-input item-select" style="border:none">
              <div class="input-label">
                Estado
              </div>
              <select ng-model="estadoSelected" ng-change="setEstado(estadoSelected)"
                      ng-options="estado.id as estado.nombre for estado in estados">
              </select>
            </label>
          </div>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Email</span>
            <input type="email" placeholder="Escribe tu correo" ng-model="cliente.correo"
                   ng-disabled="!editar" ng-required="true" name="email"
                   ng-pattern="/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/">
          </label>
          <div style="position: relative;top: 0px" class="error" ng-show="form.email.$dirty && form.email.$invalid">
            <span ng-show="form.email.$error.required">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <span class="glyphicon glyphicon-info-sign "></span>  El correo electrónico es obligatorio
            </span>
            <span ng-show="form.email.$error.pattern">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <span class="glyphicon glyphicon-info-sign "></span>  El correo electrónico es inválido
            </span>
          </div>
          <label class="item item-input item-stacked-label">
            <span class="input-label">Telefono</span>
            <input type="tel" placeholder="Escribe tu telefono" ng-model="cliente.telefono"
                   ng-disabled="!editar">
          </label>
          <li class="item item-toggle">
            Cambiar contraseña
            <label class="toggle toggle-assertive">
              <input type="checkbox" ng-model="onCambiarPwd" ng-disabled="!editar">
              <div class="track">
                <div class="handle"></div>
              </div>
            </label>
          </li>
          <label class="item item-input item-stacked-label" ng-show="onCambiarPwd">
            <input type="password" name="password" placeholder="Escribe tu nueva contraseña" ng-model="cliente.password"
                   ng-required="true" ng-if="onCambiarPwd"/>
            <input type="password" name="rpassword" placeholder="Confirma tu contraseña" ng-model="cliente.rpassword"
                   match="cliente.password" ng-if="onCambiarPwd"/>
          </label>
          <div style="position: relative;top: 0px" class="error"
               ng-show="onCambiarPwd && form.password.$dirty && form.password.$invalid">
            <span ng-show="form.password.$error.required">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <span class="glyphicon glyphicon-info-sign "></span>  La contraseña es obligatorio
            </span>
          </div>

          <div style="position: relative;top: 0px" class="error"
               ng-show="onCambiarPwd && form.rpassword.$dirty && form.rpassword.$invalid">
            <span ng-show="form.password.$error">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <span class="glyphicon glyphicon-info-sign "></span>  Las contraseñas no coinciden
            </span>
          </div>
        </div>
        <div>
          <button class="button button-full button-balanced" ng-click="actualizarCliente(form.$valid, form)"
                  type="button" ng-disabled="!editar">
            REALIZAR CAMBIOS
          </button>
        </div>
      </form>
    </ion-content>



  </div>

</ion-view>

