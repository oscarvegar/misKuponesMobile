<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>
    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/kupones.css" rel="stylesheet">

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->
    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>
    <script src="lib/ionic/js/angular/angular-input-match.js"></script>
    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- Services -->
    <script src="js/servicesDAO.js"></script>

    <!-- your app's js -->
    <script src="lib/pouchdb-3.6.0.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/login.js"></script>
    <script src="js/controllers.js"></script>
  </head>

  <body ng-app="starter">
    <div class="container" ng-controller="LoginController">
      <div id="loginbox" style="margin-top:50px;" ng-show="isLogin"
           class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
        <div class="panel panel-info" >
          <div class="panel-heading">
            <div class="panel-title">Login</div>
            <div style="float:right; font-size: 80%; position: relative; top:-27px">
              <button class="btn btn-primary">¿Olvidaste tu contraseña?</button>
            </div>
          </div>
          <div style="padding-top:30px" class="panel-body" >
            <div ng-show="errorLogin" id="login-alert"
                 class="alert alert-danger col-sm-12">
              {{errorLogin}}
            </div>
            <form id="loginform" name="loginForm" class="form-horizontal" role="form" ng-submit="login()">

              <div style="margin-bottom: 25px" class="input-group">
                <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                <input id="login-username" type="text" class="form-control" name="email"
                       ng-model="user.identifier" placeholder="  Escribe tu nombre de usuario"
                       ng-required="true" >
              </div>
              <div style="position: relative;top: -15px" class="error" ng-show="loginForm.email.$dirty && loginForm.email.$invalid">
                <span ng-show="loginForm.email.$error.required">
                  <span class="glyphicon glyphicon-info-sign"></span> El correo electrónico es obligatorio
                </span>
                <span ng-show="loginForm.email.$error.pattern">
                  <span class="glyphicon glyphicon-info-sign"></span> El correo electrónico es inválido
                </span>
              </div>
              <div style="margin-bottom: 25px" class="input-group">
                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                <input id="login-password" type="password" class="form-control" name="password"
                       placeholder="  Escribe tu contraseña" ng-model="user.password"
                       ng-required="true" ng-minlength="7">
              </div>
              <div style="position: relative;top: -15px" class="error" ng-show="loginForm.password.$dirty && loginForm.password.$invalid">
                <span ng-show="loginForm.password.$error.required">
                  <span class="glyphicon glyphicon-info-sign "></span>  La contraseña es obligatoria
                </span>
                <span ng-show="loginForm.password.$error.minlength">
                  <span class="glyphicon glyphicon-info-sign "></span>  La contraseña es debe tener al menos 7 caracteres
                </span>
              </div>
              <div class="input-group">
                <div class="checkbox">
                  <label style="position: relative;top: -10px;">
                    <input id="login-remember" type="checkbox" name="remember" value="1">
                    <span style="position: relative;top: 10px;">&nbsp;&nbsp;&nbsp;Recordar</span>
                  </label>
                </div>
              </div>
              <div style="margin-top:10px" class="form-group">
                <!-- Button -->
                <div class="col-sm-12 controls">
                  <button id="btn-login" class="btn btn-success" ng-disabled="loginForm.$invalid">
                    Ingresar
                  </button>
                </div>
              </div>
              <div class="form-group">
                <div class="col-md-12 control">
                  <div style="border-top: 1px solid#888; padding-top:15px; font-size:85%" >
                    ¡Aún no tienes una cuenta!
                    <button class="btn btn-primary" ng-click="switch()">
                      Registrate aqui
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div id="signupbox" ng-hide="isLogin" style="margin-top:50px;"
           class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
        <div class="panel panel-info">
          <div class="panel-heading">
            <div class="panel-title">Registro</div>
            <div style="float:right; font-size: 85%; position: relative; top:-25px">
              <span id="signinlink" class="btn btn-primary" ng-click="switch()" >Login</span>
            </div>
          </div>
          <div class="panel-body" >
            <form id="signupform" name="form" class="form-horizontal" role="form" ng-submit="registrar()">

              <div id="signupalert" style="display:none" class="alert alert-danger">
                <p>Error:</p>
                <span></span>
              </div>

              <div class="form-group">
                <label for="username" class="col-md-3 control-label">Usuario</label>
                <div class="col-md-9">
                  <input type="text" class="form-control" name="username" ng-model="user.username"
                         placeholder="Escribe tu nombre de usuario" ng-required="true">
                </div>
              </div>
              <div style="position: relative;top: -15px" class="error" ng-show="form.username.$dirty && form.username.$invalid">
                <span ng-show="form.username.$error.required">
                  <span class="glyphicon glyphicon-info-sign "></span>  El nombre de usuario es obligatorio
                </span>
              </div>

              <div class="form-group">
                <label for="email" class="col-md-3 control-label">Email</label>
                <div class="col-md-9">
                  <input type="text" class="form-control" name="email" ng-model="user.email"
                         placeholder="Escribe tu correo electrónico" ng-required="true"
                         ng-pattern="/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/" >
                </div>
              </div>
              <div style="position: relative;top: -15px" class="error" ng-show="form.email.$dirty && form.email.$invalid">
                <span ng-show="form.email.$error.required">
                  <span class="glyphicon glyphicon-info-sign "></span>  El correo electrónico es obligatorio
                </span>
                <span ng-show="form.email.$error.pattern">
                  <span class="glyphicon glyphicon-info-sign "></span>  El correo electrónico es inválido
                </span>
              </div>

              <div class="form-group">
                <label for="password" class="col-md-3 control-label">Contraseña</label>
                <div class="col-md-9">
                  <input type="password" class="form-control" name="password" ng-model="user.password"
                         placeholder="Escribe tu contraseña" ng-required="true" ng-minlength="7">
                </div>
              </div>

              <div style="position: relative;top: -15px" class="error" ng-show="form.password.$dirty && form.password.$invalid">
                <span ng-show="form.password.$error.required">
                  <span class="glyphicon glyphicon-info-sign "></span>  La contraseña es obligatoria
                </span>
                <span ng-show="form.password.$error.minlength">
                  <span class="glyphicon glyphicon-info-sign "></span>  La contraseña debe tener al menos 7 caracteres
                </span>
              </div>

              <div class="form-group">
                <label for="password" class="col-md-3 control-label">R. Contraseña</label>
                <div class="col-md-9">
                  <input type="password" class="form-control" name="rpasswd" ng-model="rpassword"
                         placeholder="Confirma tu contraseña" ng-match="user.password">
                </div>
              </div>
              <div style="position: relative;top: -15px" class="error" ng-show="form.rpasswd.$dirty && form.rpasswd.$invalid">
                <span>
                  <span class="glyphicon glyphicon-info-sign "></span>  Las contraseñas no coinciden
                </span>
              </div>

              <div class="form-group">
                <!-- Button -->
                <div class="col-md-offset-3 col-md-9">
                  <button id="btn-signup" class="btn btn-info"
                          ng-disabled="form.$invalid">
                    <i class="icon-hand-right"></i> &nbsp Registrarme
                  </button>
                </div>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>

  </body>
</html>
